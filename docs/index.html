<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Workflows for Mass-Spectrometry Based Non-Target Analysis • patRoon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Workflows for Mass-Spectrometry Based Non-Target Analysis">
<meta property="og:description" content="Provides an easy-to-use interface to a mass spectrometry based
    non-target analysis workflow. Various (open-source) tools are combined
    which provide algorithms for extraction and grouping of features,
    extraction of MS and MS/MS data, automatic formula and compound annotation
    and grouping related features to components. In addition, various tools are
    provided for e.g. data preparation and cleanup, plotting results and
    automatic reporting.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">patRoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="reference/index.html">Online</a>
    </li>
    <li>
      <a href="reference/patRoon.pdf">PDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tutorial.html">Online HTML page</a>
    </li>
    <li>
      <a href="articles/tutorial.pdf">PDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Handbook
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="handbook_bd/index.html">Book format</a>
    </li>
    <li>
      <a href="handbook_bd/handbook.pdf">PDF</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rickhelmus/patRoon" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="patroon">patRoon<a class="anchor" aria-label="anchor" href="#patroon"></a>
</h1></div>

<p><code>patRoon</code> aims to provide comprehensive mass spectrometry based non-target analysis (NTA) workflows for environmental analysis. The name is derived from a Dutch word that means <em>pattern</em> and may also be an acronym for <em>hyPhenated mAss specTROmetry nOn-target aNalysis</em>.</p>
<div class="section level2">
<h2 id="project-news">Project news<a class="anchor" aria-label="anchor" href="#project-news"></a>
</h2>
<p><strong>May 2022</strong> <code>patRoon 2.1</code> is now available. This new release integrates prediction of transformation products with <a href="https://qed.epa.gov/cts/" class="external-link">CTS</a>, adds several feature intensity normalization methods, adds new functionality and improvements for reporting TP data and supports loading, processing and annotation with MS libraries such as MassBank. Please see the <a href="https://github.com/rickhelmus/patRoon/blob/master/NEWS.md" class="external-link">Project NEWS</a> for details.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Mass spectrometry based non-target analysis is used to screen large numbers of chemicals simultaneously. For this purpose, high resolution mass spectrometry instruments are used which are typically coupled (or <em>hyphenated</em>) with chromatography (<em>e.g.</em> LC or GC). The size and complexity of resulting data makes manual processing impractical. Many software tools were/are developed to facilitate a more automated approach. However, these tools are generally not optimized for environmental workflows and/or only implement parts of the functionality required.</p>
<p><code>patRoon</code> combines established software tools with novel functionality in order to provide comprehensive NTA workflows. The different algorithms are provided through a consistent interface, which removes the need to know all the details of each individual software tool and performing tedious data conversions during the workflow. The table below outlines the major functionality of <code>patRoon</code>.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="61%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>Functionality</th>
<th>Description</th>
<th>Algorithms</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Raw data pre-treatment</td>
<td>MS format conversion (e.g. vendor to <code>mzML</code>) and calibration.</td>
<td>
<a href="http://proteowizard.sourceforge.net/" class="external-link">ProteoWizard</a>, <a href="http://openms.de/" class="external-link">OpenMS</a>, <a href="https://www.bruker.com/" class="external-link">DataAnalysis</a>
</td>
</tr>
<tr class="even">
<td>Feature extraction</td>
<td>Finding features and grouping them across analyses.</td>
<td>
<a href="https://github.com/sneumann/xcms" class="external-link">XCMS</a>, <a href="http://openms.de/" class="external-link">OpenMS</a>, <a href="https://cran.r-project.org/web/packages/enviPick/index.html" class="external-link">enviPick</a>, <a href="https://www.bruker.com/" class="external-link">DataAnalysis</a>, <a href="https://github.com/hcji/KPIC2" class="external-link">KPIC2</a>, <a href="https://bio.informatik.uni-jena.de/software/sirius/" class="external-link">SIRIUS</a>, <a href="https://bitbucket.org/SSamanipour/safd.jl/src/master/" class="external-link">SAFD</a>
</td>
</tr>
<tr class="odd">
<td>Suspect screening</td>
<td>Finding features with suspected presence by MS and chromatographic data. Estimation of identification confidence levels.</td>
<td>Native</td>
</tr>
<tr class="even">
<td>MS data extraction</td>
<td>Automatic extraction and averaging of feature MS(/MS) peak lists.</td>
<td>Native, <a href="https://github.com/sneumann/mzR/" class="external-link">mzR</a>, <a href="https://www.bruker.com/" class="external-link">DataAnalysis</a>
</td>
</tr>
<tr class="odd">
<td>Formula annotation</td>
<td>Automatic calculation of formula candidates for features.</td>
<td>
<a href="https://sourceforge.net/projects/genform" class="external-link">GenForm</a>, <a href="https://bio.informatik.uni-jena.de/software/sirius/" class="external-link">SIRIUS</a>, <a href="https://www.bruker.com/" class="external-link">DataAnalysis</a>
</td>
</tr>
<tr class="even">
<td>Compound annotation</td>
<td>Automatic (<em>in silico</em>) compound annotation of features.</td>
<td>
<a href="http://c-ruttkies.github.io/MetFrag/" class="external-link">MetFrag</a>, <a href="https://bio.informatik.uni-jena.de/software/sirius/" class="external-link">SIRIUS</a>, Native</td>
</tr>
<tr class="odd">
<td>Componentization &amp; adduct annotation</td>
<td>Grouping of related features based on chemistry (e.g. isotopes, adducts and homologs), hierarchical clustering or MS/MS similarity into components. Using adduct and isotope annotations for prioritizing features and improving formula/compound annotations.</td>
<td>
<a href="https://github.com/sneumann/RAMClustR" class="external-link">RAMClustR</a>, <a href="http://msbi.ipb-halle.de/msbi/CAMERA/" class="external-link">CAMERA</a>, <a href="https://cran.r-project.org/web/packages/nontarget/index.html" class="external-link">nontarget R package</a>, <a href="http://openms.de/" class="external-link">OpenMS</a>, <a href="https://github.com/osenan/cliqueMS" class="external-link">cliqueMS</a>, Native</td>
</tr>
<tr class="even">
<td>Combining algorithms</td>
<td>Combine data from different algorithms (e.g. features, annotations) and generate a consensus.</td>
<td>Native</td>
</tr>
<tr class="odd">
<td><em>Sets workflows</em></td>
<td>Simultaneous processing and combining +/- MS ionization data</td>
<td>Native</td>
</tr>
<tr class="even">
<td>Transformation product (TP) screening</td>
<td>Automatic screening of TPs using library/<em>in-silico</em> data, MS similarities and classifications. Tools to improve compound TP annotation.</td>
<td>
<a href="https://bitbucket.org/djoumbou/biotransformer/src/master/" class="external-link">BioTransformer</a>, <a href="https://doi.org/10.5281/zenodo.5644560" class="external-link">PubChemLite</a>, Native</td>
</tr>
<tr class="odd">
<td>Reporting</td>
<td>Automatic reporting in <em>CSV</em>, <em>PDF</em> and (interactive) <em>HTML</em> formats. An example HTML report can be viewed <a href="https://rickhelmus.github.io/patRoon/examples/report.html">here</a>.</td>
<td>Native</td>
</tr>
<tr class="even">
<td>Data clean-up &amp; prioritization</td>
<td>Filters for blanks, replicates, intensity thresholds, neutral losses, annotation scores, identification levels and many more.</td>
<td>Native</td>
</tr>
<tr class="odd">
<td>Data curation</td>
<td>Several graphical interactive tools and functions to inspect and remove unwanted data.</td>
<td>Native</td>
</tr>
</tbody>
</table>
<p>The workflow of non-target analysis typically depends on the aims and requirements of the study and the instrumentation and methodology used for sample analysis. For this reason, <code>patRoon</code> does not enforce a certain workflow. Instead, most workflow steps are optional, fully configurable and algorithms can easily be mixed or even combined.</p>
</div>
<div class="section level2">
<h2 id="implementation-details">Implementation details<a class="anchor" aria-label="anchor" href="#implementation-details"></a>
</h2>
<ul>
<li>
<code>patRoon</code> is implemented as an <a href="https://www.r-project.org/" class="external-link">R</a> package, which allows easy interfacing with the many other <code>R</code> based MS tools and other data processing functionality from <code>R</code>.</li>
<li>Fully open-source (GPLv3).</li>
<li>Developed on Windows, Linux and macOS</li>
<li>S4 classes and generics are used to implement a consistent interface to all supported algorithms.</li>
<li>Continuous integration is used for automated unit testing, automatically updating the <a href="https://rickhelmus.github.io/patRoon/">Website</a> and documentation and maintaining a <a href="https://cran.r-project.org/web/packages/miniCRAN/index.html" class="external-link">miniCRAN</a> <a href="https://github.com/rickhelmus/patRoonDeps" class="external-link">repository</a> and <a href="https://hub.docker.com/r/patroonorg/patroonrs" class="external-link">Docker image</a> to simplify installation (see <a href="https://rickhelmus.github.io/patRoon/handbook_bd/installation.html">the handbook</a> for more details).</li>
<li>Supports all major instrument vendor input formats (through usage of <a href="http://proteowizard.sourceforge.net/" class="external-link">ProteoWizard</a> and <a href="https://www.bruker.com/" class="external-link">DataAnalysis</a>).</li>
<li>Optimizations
<ul>
<li>
<code>data.table</code> is used internally as a generally much more efficient alternative to <code>data.frame</code>.</li>
<li>The <a href="https://github.com/r-lib/processx" class="external-link">processx</a> and <a href="https://github.com/HenrikBengtsson/future" class="external-link">future</a> <code>R</code> packages are used for parallelization.</li>
<li>Results from workflow steps are cached within a <a href="https://www.sqlite.org/index.html" class="external-link">SQLite</a> database to avoid repeated computations.</li>
<li>Code for loading MS and EIC data, MS similarity calculations and others were implemented in <code>C++</code> to reduce computational times.</li>
</ul>
</li>
<li>The <a href="http://www.omegahat.net/RDCOMClient/" class="external-link">RDCOMClient</a> <code>R</code> package is used to interface with Bruker DataAnalysis algorithms.</li>
<li>The <a href="https://shiny.rstudio.com/" class="external-link">Shiny</a> <code>R</code> package was used to implement several GUI tools.</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>patRoon</code> itself can be installed as any other <code>R</code> package, however, some additional installation steps are needed to install its dependencies. Alternatively, <a href="https://www.rstudio.com/" class="external-link">R Studio</a> based Docker images are available to easily deploy a complete <code>patRoon</code> environment. Please see the <a href="https://rickhelmus.github.io/patRoon/handbook_bd/installation.html">installation section in the handbook</a> for more information.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>For a very quick start:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rickhelmus/patRoon" class="external-link">patRoon</a></span><span class="op">)</span>
<span class="fu"><a href="reference/newProject.html">newProject</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="reference/newProject.html">newProject()</a></code> function will pop-up a dialog screen (requires <a href="https://www.rstudio.com/" class="external-link">R Studio</a>), which will allow you to quickly select the analyses and common workflow options to subsequently generate a template <code>R</code> processing script.</p>
<p>However, for a better guide to get started it is recommended to read the <a href="https://rickhelmus.github.io/patRoon/articles/tutorial.html">tutorial</a>. Afterwards the <a href="https://rickhelmus.github.io/patRoon/handbook_bd/index.html">handbook</a> is a recommended read if you want to know more about advanced usage of <code>patRoon</code>. Finally, the <a href="https://rickhelmus.github.io/patRoon/reference/index.html">reference</a> outlines all the details of the <code>patRoon</code> package.</p>
</div>
<div class="section level2">
<h2 id="citing">Citing<a class="anchor" aria-label="anchor" href="#citing"></a>
</h2>
<p>When you use <code>patRoon</code> please cite its publications:</p>
<p>Rick Helmus, Thomas L. ter Laak, Annemarie P. van Wezel, Pim de Voogt and Emma L. Schymanski. <a href="https://doi.org/10.1186/s13321-020-00477-w" class="external-link">patRoon: open source software platform for environmental mass spectrometry based non-target screening</a>. <em>Journal of Cheminformatics</em> <strong>13</strong>, 1 (2021)</p>
<p>Rick Helmus, Bas van de Velde, Andrea M. Brunner, Thomas L. ter Laak, Annemarie P. van Wezel and Emma L. Schymanski. <a href="https://doi.org/10.21105/joss.04029" class="external-link">patRoon 2.0: Improved non-target analysis workflows including automated transformation product screening</a>. <em>Journal of Open Source Software</em>, 7(71), 4029</p>
<p><code>patRoon</code> builds on many open-source software tools and open data sources. Therefore, it is important to also cite their work when using these algorithms via <code>patRoon</code>.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>For bug reports, code contributions (pull requests), questions, suggestions and general feedback please use the <a href="https://github.com/rickhelmus/patRoon" class="external-link">GitHub page</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rickhelmus/patRoon/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rickhelmus/patRoon/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing patRoon</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rick Helmus <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9401-3133" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://circleci.com/gh/rickhelmus/patRoon" class="external-link"><img src="https://circleci.com/gh/rickhelmus/patRoon.svg?style=svg" alt="CircleCI"></a></li>
<li><a href="https://ci.appveyor.com/project/rickhelmus/patroon/branch/master" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/52nnpq8kqpkjqc92/branch/master?svg=true" alt="Build status"></a></li>
<li><a href="https://codecov.io/gh/rickhelmus/patRoon" class="external-link"><img src="https://codecov.io/gh/rickhelmus/patRoon/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://hub.docker.com/r/patroonorg/patroonrs" class="external-link"><img src="https://img.shields.io/docker/image-size/patroonorg/patroonrs/latest" alt="Docker image"></a></li>
<li><a href="https://doi.org/10.1186/s13321-020-00477-w" class="external-link"><img src="https://zenodo.org/badge/DOI/10.1186/s13321-020-00477-w.svg" alt="DOI:10.1186/s13321-020-00477-w"></a></li>
<li><a href="https://doi.org/10.21105/joss.04029" class="external-link"><img src="https://joss.theoj.org/papers/10.21105/joss.04029/status.svg" alt="DOI"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
