<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Interactive GUI utilities to check workflow data — checkFeatures • patRoon</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Interactive GUI utilities to check workflow data — checkFeatures"><meta property="og:description" content="These functions provide interactive utilities to explore and review workflow data using a shiny
graphical user interface (GUI). In addition, unsatisfactory data (e.g. noise identified as a feature and
unrelated feature groups in a component) can easily be selected for removal."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patRoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../reference/index.html">Online</a>
    </li>
    <li>
      <a href="../reference/patRoon.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorial

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tutorial.html">Online HTML page</a>
    </li>
    <li>
      <a href="../articles/tutorial.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Handbook

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../handbook_bd/index.html">Book format</a>
    </li>
    <li>
      <a href="../handbook_bd/handbook.pdf">PDF</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rickhelmus/patRoon" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Interactive GUI utilities to check workflow data</h1>
    <small class="dont-index">Source: <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/generics.R" class="external-link"><code>R/generics.R</code></a>, <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/main.R" class="external-link"><code>R/main.R</code></a>, <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/check_components.R" class="external-link"><code>R/check_components.R</code></a>, and 1 more</small>
    <div class="hidden name"><code>check-GUI.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions provide interactive utilities to explore and review workflow data using a <span class="pkg">shiny</span>
graphical user interface (GUI). In addition, unsatisfactory data (<em>e.g.</em> noise identified as a feature and
unrelated feature groups in a component) can easily be selected for removal.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">checkFeatures</span><span class="op">(</span></span>
<span>  <span class="va">fGroups</span>,</span>
<span>  session <span class="op">=</span> <span class="st">"checked-features.yml"</span>,</span>
<span>  EICParams <span class="op">=</span> <span class="fu"><a href="EICParams.html">getDefEICParams</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  clearSession <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">checkComponents</span><span class="op">(</span></span>
<span>  <span class="va">components</span>,</span>
<span>  <span class="va">fGroups</span>,</span>
<span>  session <span class="op">=</span> <span class="st">"checked-components.yml"</span>,</span>
<span>  EICParams <span class="op">=</span> <span class="fu"><a href="EICParams.html">getDefEICParams</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  clearSession <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'components'</span></span>
<span><span class="fu">checkComponents</span><span class="op">(</span></span>
<span>  <span class="va">components</span>,</span>
<span>  <span class="va">fGroups</span>,</span>
<span>  session <span class="op">=</span> <span class="st">"checked-components.yml"</span>,</span>
<span>  EICParams <span class="op">=</span> <span class="fu"><a href="EICParams.html">getDefEICParams</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  clearSession <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">importCheckFeaturesSession</span><span class="op">(</span></span>
<span>  <span class="va">sessionIn</span>,</span>
<span>  <span class="va">sessionOut</span>,</span>
<span>  <span class="va">fGroups</span>,</span>
<span>  rtWindow <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  mzWindow <span class="op">=</span> <span class="fl">0.002</span>,</span>
<span>  overWrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'featureGroups'</span></span>
<span><span class="fu">checkFeatures</span><span class="op">(</span></span>
<span>  <span class="va">fGroups</span>,</span>
<span>  session <span class="op">=</span> <span class="st">"checked-features.yml"</span>,</span>
<span>  EICParams <span class="op">=</span> <span class="fu"><a href="EICParams.html">getDefEICParams</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  clearSession <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">getMCTrainData</span><span class="op">(</span><span class="va">fGroups</span>, <span class="va">session</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">predictCheckFeaturesSession</span><span class="op">(</span><span class="va">fGroups</span>, <span class="va">session</span>, model <span class="op">=</span> <span class="cn">NULL</span>, overWrite <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-fgroups">fGroups<a class="anchor" aria-label="anchor" href="#arg-fgroups"></a></dt>
<dd><p>A <code><a href="featureGroups-class.html">featureGroups</a></code> object.</p>
<p>This should be the 'new' object for <code>importCheckFeaturesSession</code> for which the session needs to be imported.</p></dd>


<dt id="arg-session">session<a class="anchor" aria-label="anchor" href="#arg-session"></a></dt>
<dd><p>The session file name.</p></dd>


<dt id="arg-eicparams">EICParams<a class="anchor" aria-label="anchor" href="#arg-eicparams"></a></dt>
<dd><p>A named <code>list</code> with parameters used for extracted ion chromatogram (EIC) creation. See the
<a href="EICParams.html">EIC parameters</a> documentation for more details.</p></dd>


<dt id="arg-clearsession">clearSession<a class="anchor" aria-label="anchor" href="#arg-clearsession"></a></dt>
<dd><p>If <code>TRUE</code> the session will be completely cleared before starting the GUI. This effectively
removes all selections for data removal.</p></dd>


<dt id="arg-components">components<a class="anchor" aria-label="anchor" href="#arg-components"></a></dt>
<dd><p>The <code><a href="components-class.html">components</a></code> to be checked.</p></dd>


<dt id="arg-sessionin-sessionout">sessionIn, sessionOut<a class="anchor" aria-label="anchor" href="#arg-sessionin-sessionout"></a></dt>
<dd><p>The file names for the input and output sessions.</p></dd>


<dt id="arg-rtwindow">rtWindow<a class="anchor" aria-label="anchor" href="#arg-rtwindow"></a></dt>
<dd><p>The retention time window (seconds) used to relate 'old' with 'new' feature groups.</p></dd>


<dt id="arg-mzwindow">mzWindow<a class="anchor" aria-label="anchor" href="#arg-mzwindow"></a></dt>
<dd><p>The <em>m/z</em> window (in Da) used to relate 'old' with 'new' feature groups.</p></dd>


<dt id="arg-overwrite">overWrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Set to <code>TRUE</code> to overwrite the output session file if it already exists. If <code>FALSE</code>, the
function will stop with an error message.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>The model that was created with <span class="pkg">MetaClean</span> and that should be used to predict pass/fail data. If
<code>NULL</code>, the example model of the <span class="pkg">MetaCleanData</span> package is used.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A dataframe with the class predictions as well as the associated probabilities for each EIC as returned by the <code><a href="https://rdrr.io/pkg/MetaClean/man/getPredicitons.html" class="external-link">MetaClean::getPredicitons</a></code> function.
  The dataframe has the four columns: EIC, Pred_Class, Pred_Prob_Pass, Pred_Prob_Fail.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The data selected for removal is stored in <em>sessions</em>. These are <code class="file">YAML</code> files to allow easy external
manipulation. The sessions can be used to restore the selections that were made for data removal when the GUI tool is
executed again. Furthermore, functionality is provided to import and export sessions. To actually remove the data the
<code><a href="generics.html">filter</a></code> method should be used with the session file as input.</p>
<p><code>checkComponents</code> is used to review components and their feature groups contained within. A typical use
  case is to verify that peaks from features that were annotated as related adducts and/or isotopes are correctly
  aligned.</p>
<p><code>importCheckFeaturesSession</code> is used to import a session file that was generated from a different
  <code><a href="featureGroups-class.html">featureGroups</a></code> object. This is useful to avoid re-doing manual interpretation of chromatographic peaks
  when, for instance, feature group data is re-created with different parameters.</p>
<p><code>checkFeatures</code> is used to review chromatographic information for feature groups. Its main purpose is
  to assist in reviewing the quality of detected feature (groups) and easily select unwanted data such as features
  with poor peak shapes or noise.</p>
<p><code>getMCTrainData</code> converts a session created by <code>checkFeatures</code> to a <code>data.frame</code> that can be
  used by the <span class="pkg">MetaClean</span> to train a new model. The output format is comparable to that from
  <code><a href="https://rdrr.io/pkg/MetaClean/man/getPeakQualityMetrics.html" class="external-link">getPeakQualityMetrics</a></code>.</p>
<p><code>predictCheckFeaturesSession</code> Uses ML data from <span class="pkg">MetaClean</span> to predict the quality (Pass/Fail) of
  feature group data, and converts this to a session which can be reviewed with <code>checkFeatures</code> and used to
  remove unwanted feature groups by <code><a href="feature-filtering.html">filter</a></code>.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The <code>topMost</code> and <code>topMostByRGroup</code> EIC parameters (<code><a href="EICParams.html">EICParams</a></code>) are ignored.</p>
<p><code>checkComponents</code>: Some componentization algorithms (<em>e.g.</em> <code><a href="generateComponentsNontarget.html">generateComponentsNontarget</a></code>
  and <code><a href="generateComponentsTPs.html">generateComponentsTPs</a></code>) may output components where the same feature group in a component is
  present multiple times, for instance, when multiple TPs are matched to the same feature group. If such a feature
  group is selected for removal, then <em>all</em> of its result in the component will be marked for removal.</p>
<p><code>getMCTrainData</code> only uses session data for selected feature groups. Selected features for removal are
  ignored, as this is not supported by <span class="pkg">MetaClean</span>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Chetnik K, Petrick L, Pandey G (2020).
“MetaClean: a machine learning-based classifier for reduced false positive peak detection in untargeted LC-MS metabolomics data.”
<em>Metabolomics</em>, <b>16</b>(11).
<a href="https://doi.org/10.1007/s11306-020-01738-3" class="external-link">doi:10.1007/s11306-020-01738-3</a>
.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

