<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Optimization of feature finding and grouping parameters — feature-optimization • patRoon</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Optimization of feature finding and grouping parameters — feature-optimization"><meta property="og:description" content="Automatic optimization of feature finding and grouping parameters through Design of Experiments (DoE)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patRoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../reference/index.html">Online</a>
    </li>
    <li>
      <a href="../reference/patRoon.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tutorial.html">Online HTML page</a>
    </li>
    <li>
      <a href="../articles/tutorial.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Handbook
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../handbook_bd/index.html">Book format</a>
    </li>
    <li>
      <a href="../handbook_bd/handbook.pdf">PDF</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rickhelmus/patRoon" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimization of feature finding and grouping parameters</h1>
    <small class="dont-index">Source: <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/main.R" class="external-link"><code>R/main.R</code></a>, <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/feature_groups-optimize.R" class="external-link"><code>R/feature_groups-optimize.R</code></a>, <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/features-optimize.R" class="external-link"><code>R/features-optimize.R</code></a></small>
    <div class="hidden name"><code>feature-optimization.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Automatic optimization of feature finding and grouping parameters through Design of Experiments (DoE).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimizeFeatureGrouping</span><span class="op">(</span></span>
<span>  <span class="va">features</span>,</span>
<span>  <span class="va">algorithm</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  templateParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  paramRanges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  maxIterations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  maxModelDeviation <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">generateFGroupsOptPSet</span><span class="op">(</span><span class="va">algorithm</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">getDefFGroupsOptParamRanges</span><span class="op">(</span><span class="va">algorithm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">optimizeFeatureFinding</span><span class="op">(</span></span>
<span>  <span class="va">anaInfo</span>,</span>
<span>  <span class="va">algorithm</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  templateParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  paramRanges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  isoIdent <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">algorithm</span> <span class="op">==</span> <span class="st">"openms"</span><span class="op">)</span> <span class="st">"OpenMS"</span> <span class="kw">else</span> <span class="st">"IPO"</span>,</span>
<span>  checkPeakShape <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  CAMERAOpts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  maxIterations <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  maxModelDeviation <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">generateFeatureOptPSet</span><span class="op">(</span><span class="va">algorithm</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">getDefFeaturesOptParamRanges</span><span class="op">(</span><span class="va">algorithm</span>, method <span class="op">=</span> <span class="st">"centWave"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>features</dt>
<dd><p>A <code><a href="features-class.html">features</a></code> object with the features that should
be used to optimize grouping.</p></dd>


<dt>algorithm</dt>
<dd><p>The algorithm used for finding or grouping features (see <code><a href="findFeatures.html">findFeatures</a></code> and
<code><a href="groupFeatures.html">groupFeatures</a></code>).</p></dd>


<dt>...</dt>
<dd><p>One or more lists with parameter sets (see below) (for <code>optimizeFeatureFinding</code> and
<code>optimizeFeatureGrouping</code>). Alternatively, named arguments that set (and possibly override) the parameters
that should be returned from <code>generateFeatureOptPSet</code> or <code>generateFGroupsOptPSet</code>.</p></dd>


<dt>templateParams</dt>
<dd><p>Template parameter set (see below).</p></dd>


<dt>paramRanges</dt>
<dd><p>A list with vectors containing absolute parameter ranges (minimum/maximum) that constrain numeric
parameters choosen during experiments. See the <code>getDefFeaturesOptParamRanges</code> and
<code>getDefFGroupsOptParamRanges</code> functions for defaults. Values should be <code>Inf</code> when no limit should
be used.</p></dd>


<dt>maxIterations</dt>
<dd><p>Maximum number of iterations that may be performed to find optimimum values. Used to restrict
neededless long optimization procedures. In IPO this was fixed to <samp>50</samp>.</p></dd>


<dt>maxModelDeviation</dt>
<dd><p>See the <code>Potential suboptimal results by optimization model</code> section below.</p></dd>


<dt>parallel</dt>
<dd><p>If set to <code>TRUE</code> then code is executed in parallel through the <a href="https://CRAN.R-project.org/package=futures" class="external-link"><span class="pkg">futures</span></a> package. Please
see the parallelization section in the handbook for more details.</p></dd>


<dt>anaInfo</dt>
<dd><p><a href="analysis-information.html">Analysis info table</a> (passed to <code><a href="findFeatures.html">findFeatures</a></code>).</p></dd>


<dt>isoIdent</dt>
<dd><p>Sets the algorithm used to identify isotopes. Valid values
are: <code>"IPO"</code>, <code>"CAMERA"</code> and <code>"OpenMS"</code>. The latter can only
be used when OpenMS is used to find features, and is highly recommended in
this situation.</p></dd>


<dt>checkPeakShape</dt>
<dd><p>Additional peak shape checking of isotopes. Only used
if <code>isoIdent="IPO"</code>. Valid values: <code>"none"</code>,
<code>"borderIntensity"</code>, <code>"sinusCurve"</code> or <code>"normalDistr"</code>.</p></dd>


<dt>CAMERAOpts</dt>
<dd><p>A <code>list</code> with additional arguments passed to
<code><a href="https://rdrr.io/pkg/CAMERA/man/findIsotopes-methods.html" class="external-link">CAMERA::findIsotopes</a></code> when <code>isoIdent="CAMERA"</code>.</p></dd>


<dt>method</dt>
<dd><p>Method used by XCMS to find features (only if <code>algorithm="xcms"</code>).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The <code>optimizeFeatureFinding</code> and <code>optimizeFeatureGrouping</code> return their results in a</p>
<p></p>
<p><code><a href="optimizationResult-class.html">optimizationResult</a></code> object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Many different parameters exist that may affect the output quality of feature finding and grouping. To avoid time
consuming manual experimentation, functionality is provided to largely automate the optimization process. The
methodology, which uses design of experiments (DoE), is based on the excellent
<a href="https://github.com/rietho/IPO" class="external-link">Isotopologue Parameter Optimization (IPO) R package</a>. The functionality of this
package is directly integrated in patRoon. Some functionality was added or changed, however, the principle algorithm
workings are nearly identical.</p>
<p>Compared to IPO, the following functionality was added or changed:</p><ul><li><p>The code was made more generic in order to include support for other feature finding/grouping algorithms
(<em>e.g.</em> OpenMS, enviPick, XCMS3).</p></li>
<li><p>The methodology of <code class="command">FeatureFinderMetabo</code> (OpenMS) may be used to
find isotopes.</p></li>
<li><p>The <code>maxModelDeviation</code> parameter was added to potentially avoid suboptimal results
(<a href="https://github.com/rietho/IPO/issues/61" class="external-link">issue discussed here</a>).</p></li>
<li><p>The use of multiple 'parameter sets' (discussed below) which, for instance, allow optimizing qualitative
paremeters more easily (see <code>examples</code>).</p></li>
<li><p>More consistent optimization code for feature finding/grouping.</p></li>
<li><p>More consistent output using S4 classes (<em>i.e.</em> <code><a href="optimizationResult-class.html">optimizationResult</a></code> class).</p></li>
<li><p>Parallelization is performed via the <a href="https://CRAN.R-project.org/package=future" class="external-link"><span class="pkg">future</span></a> package instead of <span class="pkg">BiocParallel</span>. If this is enabled
(<code>parallel=TRUE</code>) then any parallelization supported by the feature finding or grouping algorithm is disabled.</p></li>
</ul></div>
    <div id="parameter-sets">
    <h2>Parameter sets</h2>
    <p>Which parameters should be optimized is determined by a <em>parameter set</em>. A set is
  defined by a named <code>list</code> containing the minimum and maximum starting range for each parameter that should be
  tested. For instance, the set <code>list(chromFWHM = c(5, 10), mzPPM = c(5, 15))</code> specifies that the
  <code>chromFWHM</code> and <code>mzPPM</code> parameters (used by OpenMS feature finding) should be optimized within a range of
  <samp>5</samp>-<samp>10</samp> and <samp>5</samp>-<samp>15</samp>, respectively. Note that this range may be increased or decreased after a
  DoE iteration in order to find a better optimum. The absolute limits are controlled by the <code>paramRanges</code>
  function argument.</p>
<p>Multiple parameter sets may be specified (<em>i.e.</em> through the ... function argument). In this situation, the
  optimization algorithm is repeated for each set, and the final optimum is determined from the parameter set with
  the best response. The <code>templateParams</code> function argument may be useful in this case to define a template for
  each parameter set. Actual parameter sets are then constructed by joining each parameter set with the set specified
  for <code>templateParams</code>. When a parameter is defined in both a regular and template set, the parameter in the
  regular set takes precedence.</p>
<p>Parameters that should not be optimized but still need to be set for the feature finding/grouping functions should
  also be defined in a (template) parameter set. Which parameters should be optimized is determined whether its value
  is specified as a vector range or a single fixed value. For instance, when a set is defined as <code>list(chromFWHM
  = c(5, 10), mzPPM = 5)</code>, only the <code>chromFWHM</code> parameter is optimized, whereas <code>mzPPM</code> is kept constant at
  <samp>5</samp>.</p>
<p>Using multiple parameter sets with differing fixed values allows optimization of qualitative values (see examples
  below).</p>
<p>The parameters specified in parameter sets are directly passed through the <code><a href="findFeatures.html">findFeatures</a></code> or
  <code><a href="groupFeatures.html">groupFeatures</a></code> functions. Hence, grouping and retention time alignment parameters used by XCMS should
  (still) be set through the <code>groupArgs</code> and <code>retcorArgs</code> parameters.</p>
<p><strong>NOTE:</strong> For XCMS3, which normally uses parameter classes for settings its options, the parameters must be
  defined in a named list like any other algorithm. The set parameters are then used passed to the constructor of the
  right parameter class object (e.g. <code>CentWaveParam</code>, <code>ObiwarpParam</code>). For grouping/alignment
  sets, these parameters need to be specified in nested lists called <code>groupParams</code> and <code>retAlignParams</code>,
  respectively (similar to <code>groupArgs</code>/<code>retcorArgs</code> for <code>algorithm="xcms"</code>). Finally, the underlying
  XCMS method to be used should be defined in the parameter set (<em>i.e.</em> by setting the <code>method</code> field for
  feature parameter sets and the <code>groupMethod</code> and <code>retAlignMethod</code> for grouping/aligning parameter sets).
  See the examples below for more details.</p>
<p><strong>NOTE:</strong> Similar to IPO, the <code>peakwidth</code> and <code>prefilter</code> parameters for XCMS feature finding should
  be split in two different values:</p><ul><li><p>The minimum and maximum ranges for <code>peakwidth</code> are optimized by setting <code>min_peakwidth</code> and
  <code>max_peakwidth</code>, respectively.</p></li>
<li><p>The <code>k</code> and <code>I</code> parameters contained in <code>prefilter</code> are split in <code>prefilter</code> and
  <code>value_of_prefilter</code>, respectively.</p></li>
</ul><p><em>Similary</em>, for KPIC2, the following parameters should be split:</p><ul><li><p>the <code>width</code> parameter (feature optimization) is optimized by specifying the <code>min_width</code> and
  <code>max_width</code> parameters.</p></li>
<li><p>the <code>tolerance</code> and <code>weight</code> parameters (feature grouping optimization) are optimized by setting
  <code>mz_tolerance</code>/<code>rt_tolerance</code> and <code>mz_weight</code>/<code>rt_weight</code> parameters, respectively.</p></li>
</ul></div>
    <div id="functions">
    <h2>Functions</h2>
    <p>The <code>optimizeFeatureFinding</code> and <code>optimizeFeatureGrouping</code> are the functions to be used
  to optimize parameters for feature finding and grouping, respectively. These functions are analogous to
  <code>optimizeXcmsSet</code> and <code>optimizeRetGroup</code> from <span class="pkg">IPO</span>.</p>
<p>The <code>generateFeatureOptPSet</code> and <code>generateFGroupsOptPSet</code> functions may be used to generate a parameter
  set for feature finding and grouping, respectively. Some algorithm dependent default parameter optimization ranges
  will be returned. These functions are analogous to <code>getDefaultXcmsSetStartingParams</code> and
  <code>getDefaultRetGroupStartingParams</code> from <span class="pkg">IPO</span>. However, unlike their IPO counterparts, these
  functions will not output default fixed values. The <code>generateFGroupsOptPSet</code> will only generate defaults for
  density grouping if <code>algorithm="xcms"</code>.</p>
<p>The <code>getDefFeaturesOptParamRanges</code> and <code>getDefFGroupsOptParamRanges</code> return the default absolute
  optimization parameter ranges for feature finding and grouping, respectively. These functions are useful if you
  want to set the <code>paramRanges</code> function argument.</p>
    </div>
    <div id="potential-suboptimal-results-by-optimization-model">
    <h2>Potential suboptimal results by optimization model</h2>
    <p>After each experiment iteration an optimimum parameter
  set is found by generating a model containing the tested parameters and their responses. Sometimes the actual
  response from the parameters derived from the model is actually signficantly lower than expected. When the response
  is lower than the maximum reponse found during the experiment, the parameters belonging to this experimental
  maximum may be choosen instead. The <code>maxModelDeviation</code> argument sets the maximum deviation in response
  between the modelled and experimental maxima. The value is relative: <samp>0</samp> means that experimental values will
  always be favored when leading to improved responses, whereas <code>1</code> will effectively disable this procedure (and
  return to 'regular' IPO behaviour).</p>
    </div>
    <div id="source">
    <h2>Source</h2>
    <p>The code and methodology is a direct adaptation from the <a href="https://github.com/rietho/IPO" class="external-link">IPO R
  package</a>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Libiseller G, Dvorzak M, Kleb U, Gander E, Eisenberg T, Madeo F, Neumann S, Trausinger G, Sinner F, Pieber T, Magnes C (2015).
“IPO: a tool for automated optimization of XCMS parameters.”
<em>BMC Bioinformatics</em>, <b>16</b>(1).
<a href="https://doi.org/10.1186/s12859-015-0562-8" class="external-link">doi:10.1186/s12859-015-0562-8</a>
.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># example data from patRoonData package</span></span>
<span><span class="va">dataDir</span> <span class="op">&lt;-</span> <span class="fu">patRoonData</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/patRoonData/man/patRoonData.html" class="external-link">exampleDataPath</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">anaInfo</span> <span class="op">&lt;-</span> <span class="fu"><a href="analysis-information.html">generateAnalysisInfo</a></span><span class="op">(</span><span class="va">dataDir</span><span class="op">)</span></span>
<span><span class="va">anaInfo</span> <span class="op">&lt;-</span> <span class="va">anaInfo</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">]</span> <span class="co"># only focus on first two analyses (e.g. training set)</span></span>
<span></span>
<span><span class="co"># optimize mzPPM and chromFWHM parameters</span></span>
<span><span class="va">ftOpt</span> <span class="op">&lt;-</span> <span class="fu">optimizeFeatureFinding</span><span class="op">(</span><span class="va">anaInfo</span>, <span class="st">"openms"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mzPPM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, chromFWHM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># optimize chromFWHM and isotopeFilteringModel (a qualitative parameter)</span></span>
<span><span class="va">ftOpt2</span> <span class="op">&lt;-</span> <span class="fu">optimizeFeatureFinding</span><span class="op">(</span><span class="va">anaInfo</span>, <span class="st">"openms"</span>,</span>
<span>                                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>isotopeFilteringModel <span class="op">=</span> <span class="st">"metabolites (5% RMS)"</span><span class="op">)</span>,</span>
<span>                                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>isotopeFilteringModel <span class="op">=</span> <span class="st">"metabolites (2% RMS)"</span><span class="op">)</span>,</span>
<span>                                 templateParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chromFWHM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># perform grouping optimization with optimized features object</span></span>
<span><span class="va">fgOpt</span> <span class="op">&lt;-</span> <span class="fu">optimizeFeatureGrouping</span><span class="op">(</span><span class="fu"><a href="optimizationResult-class.html">optimizedObject</a></span><span class="op">(</span><span class="va">ftOpt</span><span class="op">)</span>, <span class="st">"xcms"</span>,</span>
<span>                                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>groupArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">28</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                      retcorArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"obiwarp"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># same, but using the XCMS3 interface</span></span>
<span><span class="va">fgOpt2</span> <span class="op">&lt;-</span> <span class="fu">optimizeFeatureGrouping</span><span class="op">(</span><span class="fu"><a href="optimizationResult-class.html">optimizedObject</a></span><span class="op">(</span><span class="va">ftOpt</span><span class="op">)</span>, <span class="st">"xcms3"</span>,</span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>groupMethod <span class="op">=</span> <span class="st">"density"</span>, groupParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">28</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                       retAlignMethod <span class="op">=</span> <span class="st">"obiwarp"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># plot contour of first parameter set/DoE iteration</span></span>
<span><span class="fu"><a href="generics.html">plot</a></span><span class="op">(</span><span class="va">ftOpt</span>, paramSet <span class="op">=</span> <span class="fl">1</span>, DoEIteration <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"contour"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate parameter set with some predefined and custom parameters to be</span></span>
<span><span class="co"># optimized.</span></span>
<span><span class="va">pSet</span> <span class="op">&lt;-</span> <span class="fu">generateFeatureOptPSet</span><span class="op">(</span><span class="st">"openms"</span>, chromSNR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>                               useSmoothedInts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

