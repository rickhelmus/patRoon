<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Optimization of feature finding and grouping parameters — feature-optimization • patRoon</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Optimization of feature finding and grouping parameters — feature-optimization" />
<meta property="og:description" content="Automatic optimization of feature finding and grouping parameters through
Design of Experiments (DoE)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patRoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/index.html">Online</a>
    </li>
    <li>
      <a href="../reference/patRoon.pdf">PDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tutorial.html">Online HTML page</a>
    </li>
    <li>
      <a href="../articles/tutorial.pdf">PDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Handbook
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../handbook_bd/index.html">Book format</a>
    </li>
    <li>
      <a href="../articles/handbook.html">Single page</a>
    </li>
    <li>
      <a href="../handbook_bd/handbook.pdf">PDF</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rickhelmus/patRoon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimization of feature finding and grouping parameters</h1>
    <small class="dont-index">Source: <a href='https://github.com/rickhelmus/patRoon/blob/master/R/main.R'><code>R/main.R</code></a>, <a href='https://github.com/rickhelmus/patRoon/blob/master/R/feature_groups-optimize.R'><code>R/feature_groups-optimize.R</code></a>, <a href='https://github.com/rickhelmus/patRoon/blob/master/R/features-optimize.R'><code>R/features-optimize.R</code></a></small>
    <div class="hidden name"><code>feature-optimization.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Automatic optimization of feature finding and grouping parameters through
Design of Experiments (DoE).</p>
    </div>

    <pre class="usage"><span class='fu'>optimizeFeatureGrouping</span><span class='op'>(</span>
  <span class='va'>features</span>,
  <span class='va'>algorithm</span>,
  <span class='va'>...</span>,
  templateParams <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  paramRanges <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  maxIterations <span class='op'>=</span> <span class='fl'>50</span>,
  maxModelDeviation <span class='op'>=</span> <span class='fl'>0.1</span>
<span class='op'>)</span>

<span class='fu'>generateFGroupsOptPSet</span><span class='op'>(</span><span class='va'>algorithm</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>getDefFGroupsOptParamRanges</span><span class='op'>(</span><span class='va'>algorithm</span><span class='op'>)</span>

<span class='fu'>optimizeFeatureFinding</span><span class='op'>(</span>
  <span class='va'>anaInfo</span>,
  <span class='va'>algorithm</span>,
  <span class='va'>...</span>,
  templateParams <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  paramRanges <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  isoIdent <span class='op'>=</span> <span class='kw'>if</span> <span class='op'>(</span><span class='va'>algorithm</span> <span class='op'>==</span> <span class='st'>"openms"</span><span class='op'>)</span> <span class='st'>"OpenMS"</span> <span class='kw'>else</span> <span class='st'>"IPO"</span>,
  checkPeakShape <span class='op'>=</span> <span class='st'>"none"</span>,
  CAMERAOpts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  maxIterations <span class='op'>=</span> <span class='fl'>50</span>,
  maxModelDeviation <span class='op'>=</span> <span class='fl'>0.1</span>
<span class='op'>)</span>

<span class='fu'>generateFeatureOptPSet</span><span class='op'>(</span><span class='va'>algorithm</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>getDefFeaturesOptParamRanges</span><span class='op'>(</span><span class='va'>algorithm</span>, method <span class='op'>=</span> <span class='st'>"centWave"</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>features</th>
      <td><p>A <code><a href='features-class.html'>features</a></code> object with the features that should
be used to optimize grouping.</p></td>
    </tr>
    <tr>
      <th>algorithm</th>
      <td><p>The algorithm used for finding or grouping features (see
<code><a href='feature-finding.html'>findFeatures</a></code> and <code><a href='feature-grouping.html'>groupFeatures</a></code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>One or more lists with parameter sets (see below) (for
<code>optimizeFeatureFinding</code> and <code>optimizeFeatureGrouping</code>).
Alternatively, named arguments that set (and possibly override) the
parameters that should be returned from <code>generateFeatureOptPSet</code> or
<code>generateFGroupsOptPSet</code>.</p></td>
    </tr>
    <tr>
      <th>templateParams</th>
      <td><p>Template parameter set (see below).</p></td>
    </tr>
    <tr>
      <th>paramRanges</th>
      <td><p>A list with vectors containing absolute parameter ranges
(minimum/maximum) that constrain numeric parameters choosen during
experiments. See the <code>getDefFeaturesOptParamRanges</code> and
<code>getDefFGroupsOptParamRanges</code> functions for defaults. Values
should be <code>Inf</code> when no limit should be used.</p></td>
    </tr>
    <tr>
      <th>maxIterations</th>
      <td><p>Maximum number of iterations that may be performed to
find optimimum values. Used to restrict neededless long
optimization procedures. In IPO this was fixed to <samp>50</samp>.</p></td>
    </tr>
    <tr>
      <th>maxModelDeviation</th>
      <td><p>See the <code>Potential suboptimal results by
optimization model</code> section below.</p></td>
    </tr>
    <tr>
      <th>anaInfo</th>
      <td><p><a href='analysis-information.html'>Analysis info table</a> (passed
to <code><a href='feature-finding.html'>findFeatures</a></code>).</p></td>
    </tr>
    <tr>
      <th>isoIdent</th>
      <td><p>Sets the algorithm used to identify isotopes. Valid values
are: <code>"IPO"</code>, <code>"CAMERA"</code> and <code>"OpenMS"</code>. The latter can only
be used when OpenMS is used to find features, and is highly recommended in
this situation.</p></td>
    </tr>
    <tr>
      <th>checkPeakShape</th>
      <td><p>Additional peak shape checking of isotopes. Only used
if <code>isoIdent="IPO"</code>. Valid values: <code>"none"</code>,
<code>"borderIntensity"</code>, <code>"sinusCurve"</code> or <code>"normalDistr"</code>.</p></td>
    </tr>
    <tr>
      <th>CAMERAOpts</th>
      <td><p>A <code>list</code> with additional arguments passed to
<code><a href='https://rdrr.io/pkg/CAMERA/man/findIsotopes-methods.html'>CAMERA::findIsotopes</a></code> when <code>isoIdent="CAMERA"</code>.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Method used by XCMS to find features (only if <code>algorithm="xcms"</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>optimizeFeatureFinding</code> and <code>optimizeFeatureGrouping</code>
  return their results in a <code><a href='optimizationResult-class.html'>optimizationResult</a></code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Many different parameters exist that may affect the output quality of feature
finding and grouping. To avoid time consuming manual experimentation,
functionality is provided to largely automate the optimization process. The
methodology, which uses design of experiments (DoE), is based on the
excellent <a href='https://github.com/rietho/IPO'>Isotopologue Parameter
Optimization (IPO) R package</a>. The functionality of this package is directly
integrated in patRoon. Some functionality was added or changed, however, the
principle algorithm workings are nearly identical.</p>
<p>Compared to IPO, the following functionality was added or changed:</p><ul>
<li><p>The code was made more generic in order to include support for other
feature finding/grouping algorithms (<em>e.g.</em> OpenMS, enviPick, XCMS3).</p></li>
<li><p>The methodology of <code class='command'>FeatureFinderMetabo</code> (OpenMS) may be used
  to find isotopes.</p></li>
<li><p>The
<code>maxModelDeviation</code> parameter was added to potentially avoid
suboptimal results (<a href='https://github.com/rietho/IPO/issues/61'>issue
discussed here</a>).</p></li>
<li><p>The use of multiple 'parameter sets' (discussed
below) which, for instance, allow optimizing qualitative paremeters more
easily (see <code>examples</code>).</p></li>
<li><p>More consistent optimization code for feature
finding/grouping.</p></li>
<li><p>More consistent output using S4 classes (<em>i.e.</em>
<code><a href='optimizationResult-class.html'>optimizationResult</a></code> class).</p></li>
<li><p>Experiments are not (yet) executed in parallel (although feature
  finding or grouping may be if the algorithm supports it).</p></li>
</ul>

    <h2 class="hasAnchor" id="parameter-sets"><a class="anchor" href="#parameter-sets"></a>Parameter sets</h2>

    <p>Which parameters should be optimized is determined
  by a <em>parameter set</em>. A set is defined by a named <code>list</code>
  containing the minimum and maximum starting range for each parameter that
  should be tested. For instance, the set <code><a href='https://rdrr.io/r/base/list.html'>list(chromFWHM = c(5, 10),
  mzPPM = c(5, 15))</a></code> specifies that the <code>chromFWHM</code> and <code>mzPPM</code>
  parameters (used by OpenMS feature finding) should be optimized within a
  range of <samp>5</samp>-<samp>10</samp> and <samp>5</samp>-<samp>15</samp>, respectively. Note that
  this range may be increased or decreased after a DoE iteration in order to
  find a better optimum. The absolute limits are controlled by the
  <code>paramRanges</code> function argument.</p>
<p>Multiple parameter sets may be specified (<em>i.e.</em> through the ...
  function argument). In this situation, the optimization algorithm is
  repeated for each set, and the final optimum is determined from the parameter
  set with the best response. The <code>templateParams</code> function argument may
  be useful in this case to define a template for each parameter set. Actual
  parameter sets are then constructed by joining each parameter set with the
  set specified for <code>templateParams</code>. When a parameter is defined in
  both a regular and template set, the parameter in the regular set takes
  precedence.</p>
<p>Parameters that should not be optimized but still need to be set for the
  feature finding/grouping functions should also be defined in a (template)
  parameter set. Which parameters should be optimized is determined whether
  its value is specified as a vector range or a single fixed value.
  For instance, when a set is defined as <code><a href='https://rdrr.io/r/base/list.html'>list(chromFWHM = c(5, 10),
  mzPPM = 5)</a></code>, only the <code>chromFWHM</code> parameter is optimized, whereas
  <code>mzPPM</code> is kept constant at <samp>5</samp>.</p>
<p>Using multiple parameter sets with differing fixed values allows
  optimization of qualitative values (see examples below).</p>  
<p>The parameters specified in parameter sets are directly passed through
  the <code><a href='feature-finding.html'>findFeatures</a></code> or <code><a href='feature-grouping.html'>groupFeatures</a></code> functions.
  Hence, grouping and retention time alignment parameters used by XCMS should
  (still) be set through the <code>groupArgs</code> and <code>retcorArgs</code>
  parameters.</p>  
<p><strong>NOTE:</strong> For XCMS3, which normally uses parameter classes for
  settings its options, the parameters must be defined in a named list like
  any other algorithm. The set parameters are then used to automatically
  constructor of the right parameter class object (e.g.
  <code>CentWaveParam</code>, <code>ObiwarpParam</code>). For
  grouping/alignment sets, these parameters need to be specified in nested
  lists called <code>groupParams</code> and <code>retAlignParams</code>, respectively
  (similar to <code>groupArgs</code>/<code>retcorArgs</code> for
  <code>algorithm="xcms"</code>). Finally, the underlying XCMS method to be used
  should be defined in the parameter set (<em>i.e.</em> by setting the
  <code>method</code> field for feature parameter sets and the <code>groupMethod</code>
  and <code>retAlignMethod</code> for grouping/aligning parameter sets). See the
  examples below for more details.</p>
<p><strong>NOTE:</strong> Similar to IPO, the <code>peakwidth</code> and <code>prefilter</code>
  parameters for XCMS feature finding should be split in two different
  values:</p><ul>
<li><p>The minimum and maximum ranges for <code>peakwidth</code> are optimized by
  setting <code>min_peakwidth</code> and <code>max_peakwidth</code>, respectively.</p></li>
<li><p>The <code>k</code> and <code>I</code> parameters contained in <code>prefilter</code>
    are split in <code>prefilter</code> and <code>value_of_prefilter</code>,
    respectively.</p></li>
</ul>

    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    <p>The <code>optimizeFeatureFinding</code> and
  <code>optimizeFeatureGrouping</code> are the functions to be used to optimize
  parameters for feature finding and grouping, respectively. These functions
  are analogous to <code>optimizeXcmsSet</code> and
  <code>optimizeRetGroup</code> from <span class="pkg">IPO</span>.</p>
<p>The <code>generateFeatureOptPSet</code> and <code>generateFGroupsOptPSet</code> functions
  may be used to generate a parameter set for feature finding and grouping,
  respectively. Some algorithm dependent default parameter optimization ranges
  will be returned. These functions are analogous to
  <code>getDefaultXcmsSetStartingParams</code> and
  <code>getDefaultRetGroupStartingParams</code> from <span class="pkg">IPO</span>. However,
  unlike their IPO counterparts, these functions will not output default fixed
  values. The <code>generateFGroupsOptPSet</code> will only generate defaults for
  density grouping if <code>algorithm="xcms"</code>.</p>
<p>The <code>getDefFeaturesOptParamRanges</code> and
  <code>getDefFGroupsOptParamRanges</code> return the default absolute optimization
  parameter ranges for feature finding and grouping, respectively. These
  functions are useful if you want to set the <code>paramRanges</code> function
  argument.</p>
    <h2 class="hasAnchor" id="potential-suboptimal-results-by-optimization-model"><a class="anchor" href="#potential-suboptimal-results-by-optimization-model"></a>Potential suboptimal results by optimization model</h2>

    <p>After each
  experiment iteration an optimimum parameter set is found by generating a
  model containing the tested parameters and their responses. Sometimes the
  actual response from the parameters derived from the model is actually
  signficantly lower than expected. When the response is lower than the
  maximum reponse found during the experiment, the parameters belonging to
  this experimental maximum may be choosen instead. The
  <code>maxModelDeviation</code> argument sets the maximum deviation in response
  between the modelled and experimental maxima. The value is relative:
  <samp>0</samp> means that experimental values will always be favored when leading
  to improved responses, whereas <code>1</code> will effectively disable this
  procedure (and return to 'regular' IPO behaviour).</p>
    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>The code and methodology is a direct adaptation from the
  <a href='https://github.com/rietho/IPO'>IPO R package</a>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Libiseller G, Dvorzak M, Kleb U, Gander E, Eisenberg T, Madeo F, Neumann S, Trausinger G, Sinner F, Pieber T, Magnes C (2015).
&#8220;IPO: a tool for automated optimization of XCMS parameters.&#8221;
<em>BMC Bioinformatics</em>, <b>16</b>(1).
doi: <a href='https://doi.org/10.1186/s12859-015-0562-8'>10.1186/s12859-015-0562-8</a>
.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># example data from patRoonData package</span>
<span class='va'>dataDir</span> <span class='op'>&lt;-</span> <span class='fu'>patRoonData</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/patRoonData/man/patRoonData.html'>exampleDataPath</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>anaInfo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='analysis-information.html'>generateAnalysisInfo</a></span><span class='op'>(</span><span class='va'>dataDir</span><span class='op'>)</span>
<span class='va'>anaInfo</span> <span class='op'>&lt;-</span> <span class='va'>anaInfo</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>]</span> <span class='co'># only focus on first two analyses (e.g. training set)</span>

<span class='co'># optimize mzPPM and chromFWHM parameters</span>
<span class='va'>ftOpt</span> <span class='op'>&lt;-</span> <span class='fu'>optimizeFeatureFinding</span><span class='op'>(</span><span class='va'>anaInfo</span>, <span class='st'>"openms"</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>mzPPM <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>10</span><span class='op'>)</span>, chromFWHM <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># optimize chromFWHM and isotopeFilteringModel (a qualitative parameter)</span>
<span class='va'>ftOpt2</span> <span class='op'>&lt;-</span> <span class='fu'>optimizeFeatureFinding</span><span class='op'>(</span><span class='va'>anaInfo</span>, <span class='st'>"openms"</span>,
                                 <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>isotopeFilteringModel <span class='op'>=</span> <span class='st'>"metabolites (5% RMS)"</span><span class='op'>)</span>,
                                 <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>isotopeFilteringModel <span class='op'>=</span> <span class='st'>"metabolites (2% RMS)"</span><span class='op'>)</span>,
                                 templateParams <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>chromFWHM <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># perform grouping optimization with optimized features object</span>
<span class='va'>fgOpt</span> <span class='op'>&lt;-</span> <span class='fu'>optimizeFeatureGrouping</span><span class='op'>(</span><span class='fu'><a href='optimizationResult-class.html'>optimizedObject</a></span><span class='op'>(</span><span class='va'>ftOpt</span><span class='op'>)</span>, <span class='st'>"xcms"</span>,
                                 <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>groupArgs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>bw <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>22</span>, <span class='fl'>28</span><span class='op'>)</span><span class='op'>)</span>,
                                      retcorArgs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"obiwarp"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># same, but using the XCMS3 interface</span>
<span class='va'>fgOpt2</span> <span class='op'>&lt;-</span> <span class='fu'>optimizeFeatureGrouping</span><span class='op'>(</span><span class='fu'><a href='optimizationResult-class.html'>optimizedObject</a></span><span class='op'>(</span><span class='va'>ftOpt</span><span class='op'>)</span>, <span class='st'>"xcms3"</span>,
                                  <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>groupMethod <span class='op'>=</span> <span class='st'>"density"</span>, groupParams <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>bw <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>22</span>, <span class='fl'>28</span><span class='op'>)</span><span class='op'>)</span>,
                                       retAlignMethod <span class='op'>=</span> <span class='st'>"obiwarp"</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># plot contour of first parameter set/DoE iteration</span>
<span class='fu'><a href='generics.html'>plot</a></span><span class='op'>(</span><span class='va'>ftOpt</span>, paramSet <span class='op'>=</span> <span class='fl'>1</span>, DoEIteration <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"contour"</span><span class='op'>)</span>

<span class='co'># generate parameter set with some predefined and custom parameters to be</span>
<span class='co'># optimized.</span>
<span class='va'>pSet</span> <span class='op'>&lt;-</span> <span class='fu'>generateFeatureOptPSet</span><span class='op'>(</span><span class='st'>"openms"</span>, chromSNR <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>)</span>,
                               useSmoothedInts <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


