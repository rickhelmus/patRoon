<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compound annotation with MetFrag — generateCompoundsMetFrag • patRoon</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compound annotation with MetFrag — generateCompoundsMetFrag"><meta property="og:description" content="Uses the metfRag package or MetFrag CL for compound identification (see
http://ipb-halle.github.io/MetFrag/)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">patRoon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../reference/index.html">Online</a>
    </li>
    <li>
      <a href="../reference/patRoon.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tutorial.html">Online HTML page</a>
    </li>
    <li>
      <a href="../articles/tutorial.pdf">PDF</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Handbook
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../handbook_bd/index.html">Book format</a>
    </li>
    <li>
      <a href="../handbook_bd/handbook.pdf">PDF</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rickhelmus/patRoon" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compound annotation with MetFrag</h1>
    <small class="dont-index">Source: <a href="https://github.com/rickhelmus/patRoon/blob/HEAD/R/compounds-metfrag.R" class="external-link"><code>R/compounds-metfrag.R</code></a></small>
    <div class="hidden name"><code>generateCompoundsMetFrag.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses the <span class="pkg">metfRag</span> package or <code class="command">MetFrag CL</code> for compound identification (see
<a href="http://ipb-halle.github.io/MetFrag/" class="external-link">http://ipb-halle.github.io/MetFrag/</a>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S4 method for featureGroups</span>
<span class="fu">generateCompoundsMetFrag</span><span class="op">(</span>
  <span class="va">fGroups</span>,
  <span class="va">MSPeakLists</span>,
  method <span class="op">=</span> <span class="st">"CL"</span>,
  timeout <span class="op">=</span> <span class="fl">300</span>,
  timeoutRetries <span class="op">=</span> <span class="fl">2</span>,
  errorRetries <span class="op">=</span> <span class="fl">2</span>,
  topMost <span class="op">=</span> <span class="fl">100</span>,
  dbRelMzDev <span class="op">=</span> <span class="fl">5</span>,
  fragRelMzDev <span class="op">=</span> <span class="fl">5</span>,
  fragAbsMzDev <span class="op">=</span> <span class="fl">0.002</span>,
  adduct <span class="op">=</span> <span class="cn">NULL</span>,
  database <span class="op">=</span> <span class="st">"pubchem"</span>,
  extendedPubChem <span class="op">=</span> <span class="st">"auto"</span>,
  chemSpiderToken <span class="op">=</span> <span class="st">""</span>,
  scoreTypes <span class="op">=</span> <span class="fu"><a href="compoundScorings.html">compoundScorings</a></span><span class="op">(</span><span class="st">"metfrag"</span>, <span class="va">database</span>, onlyDefault <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">name</span>,
  scoreWeights <span class="op">=</span> <span class="fl">1</span>,
  preProcessingFilters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UnconnectedCompoundFilter"</span>, <span class="st">"IsotopeFilter"</span><span class="op">)</span>,
  postProcessingFilters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"InChIKeyFilter"</span><span class="op">)</span>,
  maxCandidatesToStop <span class="op">=</span> <span class="fl">2500</span>,
  identifiers <span class="op">=</span> <span class="cn">NULL</span>,
  extraOpts <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>

<span class="co"># S4 method for featureGroupsSet</span>
<span class="fu">generateCompoundsMetFrag</span><span class="op">(</span>
  <span class="va">fGroups</span>,
  <span class="va">MSPeakLists</span>,
  method <span class="op">=</span> <span class="st">"CL"</span>,
  timeout <span class="op">=</span> <span class="fl">300</span>,
  timeoutRetries <span class="op">=</span> <span class="fl">2</span>,
  errorRetries <span class="op">=</span> <span class="fl">2</span>,
  topMost <span class="op">=</span> <span class="fl">100</span>,
  dbRelMzDev <span class="op">=</span> <span class="fl">5</span>,
  fragRelMzDev <span class="op">=</span> <span class="fl">5</span>,
  fragAbsMzDev <span class="op">=</span> <span class="fl">0.002</span>,
  adduct <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>,
  setThreshold <span class="op">=</span> <span class="fl">0</span>,
  setThresholdAnn <span class="op">=</span> <span class="fl">0</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>fGroups</dt>
<dd><p><code><a href="featureGroups-class.html">featureGroups</a></code> object which should be annotated. This should be the same or a subset of
the object that was used to create the specified <code>MSPeakLists</code>. In the case of a subset only the remaining
feature groups in the subset are considered.</p></dd>


<dt>MSPeakLists</dt>
<dd><p>A <code><a href="MSPeakLists-class.html">MSPeakLists</a></code> object that was generated for the supplied <code>fGroups</code>.</p></dd>


<dt>method</dt>
<dd><p>Which method should be used for MetFrag execution: <code>"CL"</code> for <code class="command">MetFragCL</code> and <code>"R"</code>
for <code class="command">MetFragR</code>. The former is usually much faster and recommended.</p></dd>


<dt>timeout</dt>
<dd><p>Maximum time (in seconds) before a metFrag query for a feature group is stopped. Also see
<code>timeoutRetries</code> argument.</p></dd>


<dt>timeoutRetries</dt>
<dd><p>Maximum number of retries after reaching a timeout before completely skipping the metFrag query
for a feature group. Also see <code>timeout</code> argument.</p></dd>


<dt>errorRetries</dt>
<dd><p>Maximum number of retries after an error occurred. This may be useful to handle e.g. connection
errors.</p></dd>


<dt>topMost</dt>
<dd><p>Only keep this number of candidates (per feature group) with highest score. Set to <code>NULL</code> to
always keep all candidates, however, please note that this may result in significant usage of CPU/RAM resources for
large numbers of candidates.</p></dd>


<dt>dbRelMzDev</dt>
<dd><p>Relative mass deviation (in ppm) for database search. Sets the
<span class="option">DatabaseSearchRelativeMassDeviation</span> option.</p></dd>


<dt>fragRelMzDev</dt>
<dd><p>Relative mass deviation (in ppm) for fragment matching. Sets the
<span class="option">FragmentPeakMatchRelativeMassDeviation</span> option.</p></dd>


<dt>fragAbsMzDev</dt>
<dd><p>Absolute mass deviation (in Da) for fragment matching. Sets the
<span class="option">FragmentPeakMatchAbsoluteMassDeviation</span> option.</p></dd>


<dt>adduct</dt>
<dd><p>An <code><a href="adduct-class.html">adduct</a></code> object (or something that can be converted to it with <code><a href="adduct-utils.html">as.adduct</a></code>).
  Examples: <code>"[M-H]-"</code>, <code>"[M+Na]+"</code>. If the <code>featureGroups</code> object has
  adduct annotations then these are used if <code>adducts=NULL</code>.</p>
<p>(<strong>sets workflow</strong>) The <code>adduct</code> argument is not supported for sets workflows, since the
  adduct annotations will then always be used.</p></dd>


<dt>database</dt>
<dd><p>Compound database to use. Valid values are: <code>"pubchem"</code>, <code>"chemspider"</code>,
<code>"for-ident"</code>, <code>"comptox"</code>, <code>"pubchemlite"</code>, <code>"kegg"</code>, <code>"sdf"</code>, <code>"psv"</code> and
<code>"csv"</code>. See section below for more information. Sets the <code>MetFragDatabaseType</code> option.</p></dd>


<dt>extendedPubChem</dt>
<dd><p>If <code>database="pubchem"</code>: whether to use the <em>extended</em> database that includes
information for compound scoring (<em>i.e.</em> number of patents/PubMed references). Note that downloading
candidates from this database might take extra time. Valid values are: <code>FALSE</code> (never use it), <code>TRUE</code>
(always use it) or <code>"auto"</code> (default, use if specified scorings demand it).</p></dd>


<dt>chemSpiderToken</dt>
<dd><p>A character string with the <a href="http://www.chemspider.com/AboutServices.aspx" class="external-link">ChemSpider
security token</a> that should be set when the ChemSpider database is used. Sets the <span class="option">ChemSpiderToken</span> option.</p></dd>


<dt>scoreTypes</dt>
<dd><p>A character vector defining the scoring types. See the <code>Scorings</code> section below for more
information. Note that both generic and <code class="command">MetFrag</code> specific names are accepted (<em>i.e.</em> <code>name</code> and
<code>metfrag</code> columns returned by <code><a href="compoundScorings.html">compoundScorings</a></code>). When a local database is used, the name should
match what is given there (<code>e.g</code> column names when <code>database=csv</code>). Note that MetFrag may still report
other scoring data, however, these are not used for ranking. Sets the <span class="option">MetFragScoreTypes</span> option.</p></dd>


<dt>scoreWeights</dt>
<dd><p>Numeric vector containing weights of the used scoring types. Order is the same as set in
<code>scoreTypes</code>. Values are recycled if necessary. Sets the <span class="option">MetFragScoreWeights</span> option.</p></dd>


<dt>preProcessingFilters, postProcessingFilters</dt>
<dd><p>A character vector defining pre/post filters applied before/after
fragmentation and scoring (<em>e.g.</em> <code>"UnconnectedCompoundFilter"</code>, <code>"IsotopeFilter"</code>,
<code>"ElementExclusionFilter"</code>). Some methods require further options to be set. For all filters and more
information refer to the <code>Candidate Filters</code> section on the
<a href="http://ipb-halle.github.io/MetFrag/projects/metfragr/" class="external-link">MetFragR homepage</a>. Sets the
<span class="option">MetFragPreProcessingCandidateFilter</span> and <code>MetFragPostProcessingCandidateFilter</code> options.</p></dd>


<dt>maxCandidatesToStop</dt>
<dd><p>If more than this number of candidate structures are found then processing will be aborted
and no results this feature group will be reported. Low values increase the chance of missing data, whereas too
high values will use too much computer resources and signficantly slowdown the process. Sets the
<span class="option">MaxCandidateLimitToStop</span> option.</p></dd>


<dt>identifiers</dt>
<dd><p>A <code>list</code> containing for each feature group a character vector with database identifiers that
should be used to find candidates for a feature group (the list should be named by feature group names). If
<code>NULL</code> all relevant candidates will be retrieved from the specified database. An example usage scenario is to
obtain the list of candidate identifiers from a <code><a href="compounds-class.html">compounds</a></code> object obtained with
<code><a href="generateCompoundsSIRIUS.html">generateCompoundsSIRIUS</a></code> using the <code><a href="compounds-class.html">identifiers</a></code> method. This way, only those candidates
will be searched by MetFrag that were generated by SIRIUS+CSI:FingerID. Sets the <span class="option">PrecursorCompoundIDs</span>
option.</p></dd>


<dt>extraOpts</dt>
<dd><p>A named <code>list</code> containing further settings <code class="command">MetFrag</code>. See the
<a href="http://ipb-halle.github.io/MetFrag/projects/metfragr/" class="external-link">MetFragR</a> and
<a href="http://ipb-halle.github.io/MetFrag/projects/metfragcl/" class="external-link">MetFrag CL</a> homepages for all available options. Set
to <code>NULL</code> to ignore.</p></dd>


<dt>...</dt>
<dd><p>(<strong>sets workflow</strong>) Further arguments passed to the non-sets workflow method.</p></dd>


<dt>setThreshold</dt>
<dd><p>(<strong>sets workflow</strong>) Minimum abundance for a candidate among all sets (<samp>0-1</samp>). For instance, a value of
<samp>1</samp> means that the candidate needs to be present in all the set data.</p></dd>


<dt>setThresholdAnn</dt>
<dd><p>(<strong>sets workflow</strong>) As <code>setThreshold</code>, but only taking into account the set data that contain
annotations for the feature group of the candidate.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>generateCompoundsMetFrag</code> returns a <code><a href="compoundsMF-class.html">compoundsMF</a></code> object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function uses MetFrag to generate compound candidates. This function is called when calling <code>generateCompounds</code> with
  <code>algorithm="metfrag"</code>.</p>
<p>Several online compound databases such as <a href="https://pubchem.ncbi.nlm.nih.gov/" class="external-link">PubChem</a> and
  <a href="http://www.chemspider.com/" class="external-link">ChemSpider</a> may be chosen for retrieval of candidate structures. This method
  requires the availability of MS/MS data, and feature groups without it will be ignored. Many options exist to score
  and filter resulting data, and it is highly suggested to optimize these to improve results. The <code class="command">MetFrag</code>
  options <code>PeakList</code>, <code>IonizedPrecursorMass</code> and <code>ExperimentalRetentionTimeValue</code> (in minutes) fields
  are automatically set from feature data.</p>
    </div>
    <div id="scorings">
    <h2>Scorings</h2>
    <p><code class="command">MetFrag</code> supports <em>many</em> different scorings to rank candidates. The
  <code><a href="compoundScorings.html">compoundScorings</a></code> function can be used to get an overview: (some columns are omitted)</p>
<p></p><table class="table table"><tr><td><strong>name</strong></td><td><strong>metfrag</strong></td><td><strong>database</strong></td></tr><tr><td>score</td><td>Score</td><td></td></tr><tr><td>fragScore</td><td>FragmenterScore</td><td></td></tr><tr><td>metFusionScore</td><td>OfflineMetFusionScore</td><td></td></tr><tr><td>individualMoNAScore</td><td>OfflineIndividualMoNAScore</td><td></td></tr><tr><td>numberPatents</td><td>PubChemNumberPatents</td><td>pubchem</td></tr><tr><td>numberPatents</td><td>Patent_Count</td><td>pubchemlite</td></tr><tr><td>pubMedReferences</td><td>PubChemNumberPubMedReferences</td><td>pubchem</td></tr><tr><td>pubMedReferences</td><td>ChemSpiderNumberPubMedReferences</td><td>chemspider</td></tr><tr><td>pubMedReferences</td><td>NUMBER_OF_PUBMED_ARTICLES</td><td>comptox</td></tr><tr><td>pubMedReferences</td><td>PubMed_Count</td><td>pubchemlite</td></tr><tr><td>extReferenceCount</td><td>ChemSpiderNumberExternalReferences</td><td>chemspider</td></tr><tr><td>dataSourceCount</td><td>ChemSpiderDataSourceCount</td><td>chemspider</td></tr><tr><td>referenceCount</td><td>ChemSpiderReferenceCount</td><td>chemspider</td></tr><tr><td>RSCCount</td><td>ChemSpiderRSCCount</td><td>chemspider</td></tr><tr><td>smartsInclusionScore</td><td>SmartsSubstructureInclusionScore</td><td></td></tr><tr><td>smartsExclusionScore</td><td>SmartsSubstructureExclusionScore</td><td></td></tr><tr><td>suspectListScore</td><td>SuspectListScore</td><td></td></tr><tr><td>retentionTimeScore</td><td>RetentionTimeScore</td><td></td></tr><tr><td>CPDATCount</td><td>CPDAT_COUNT</td><td>comptox</td></tr><tr><td>TOXCASTActive</td><td>TOXCAST_PERCENT_ACTIVE</td><td>comptox</td></tr><tr><td>dataSources</td><td>DATA_SOURCES</td><td>comptox</td></tr><tr><td>pubChemDataSources</td><td>PUBCHEM_DATA_SOURCES</td><td>comptox</td></tr><tr><td>EXPOCASTPredExpo</td><td>EXPOCAST_MEDIAN_EXPOSURE_PREDICTION_MG/KG-BW/DAY</td><td>comptox</td></tr><tr><td>ECOTOX</td><td>ECOTOX</td><td>comptox</td></tr><tr><td>NORMANSUSDAT</td><td>NORMANSUSDAT</td><td>comptox</td></tr><tr><td>MASSBANKEU</td><td>MASSBANKEU</td><td>comptox</td></tr><tr><td>TOX21SL</td><td>TOX21SL</td><td>comptox</td></tr><tr><td>TOXCAST</td><td>TOXCAST</td><td>comptox</td></tr><tr><td>KEMIMARKET</td><td>KEMIMARKET</td><td>comptox</td></tr><tr><td>MZCLOUD</td><td>MZCLOUD</td><td>comptox</td></tr><tr><td>pubMedNeuro</td><td>PubMedNeuro</td><td>comptox</td></tr><tr><td>CIGARETTES</td><td>CIGARETTES</td><td>comptox</td></tr><tr><td>INDOORCT16</td><td>INDOORCT16</td><td>comptox</td></tr><tr><td>SRM2585DUST</td><td>SRM2585DUST</td><td>comptox</td></tr><tr><td>SLTCHEMDB</td><td>SLTCHEMDB</td><td>comptox</td></tr><tr><td>THSMOKE</td><td>THSMOKE</td><td>comptox</td></tr><tr><td>ITNANTIBIOTIC</td><td>ITNANTIBIOTIC</td><td>comptox</td></tr><tr><td>STOFFIDENT</td><td>STOFFIDENT</td><td>comptox</td></tr><tr><td>KEMIMARKET_EXPO</td><td>KEMIMARKET_EXPO</td><td>comptox</td></tr><tr><td>KEMIMARKET_HAZ</td><td>KEMIMARKET_HAZ</td><td>comptox</td></tr><tr><td>REACH2017</td><td>REACH2017</td><td>comptox</td></tr><tr><td>KEMIWW_WDUIndex</td><td>KEMIWW_WDUIndex</td><td>comptox</td></tr><tr><td>KEMIWW_StpSE</td><td>KEMIWW_StpSE</td><td>comptox</td></tr><tr><td>KEMIWW_SEHitsOverDL</td><td>KEMIWW_SEHitsOverDL</td><td>comptox</td></tr><tr><td>ZINC15PHARMA</td><td>ZINC15PHARMA</td><td>comptox</td></tr><tr><td>PFASMASTER</td><td>PFASMASTER</td><td>comptox</td></tr><tr><td>peakFingerprintScore</td><td>AutomatedPeakFingerprintAnnotationScore</td><td></td></tr><tr><td>lossFingerprintScore</td><td>AutomatedLossFingerprintAnnotationScore</td><td></td></tr><tr><td>agroChemInfo</td><td>AgroChemInfo</td><td>pubchemlite</td></tr><tr><td>bioPathway</td><td>BioPathway</td><td>pubchemlite</td></tr><tr><td>drugMedicInfo</td><td>DrugMedicInfo</td><td>pubchemlite</td></tr><tr><td>foodRelated</td><td>FoodRelated</td><td>pubchemlite</td></tr><tr><td>pharmacoInfo</td><td>PharmacoInfo</td><td>pubchemlite</td></tr><tr><td>safetyInfo</td><td>SafetyInfo</td><td>pubchemlite</td></tr><tr><td>toxicityInfo</td><td>ToxicityInfo</td><td>pubchemlite</td></tr><tr><td>knownUse</td><td>KnownUse</td><td>pubchemlite</td></tr><tr><td>disorderDisease</td><td>DisorderDisease</td><td>pubchemlite</td></tr><tr><td>identification</td><td>Identification</td><td>pubchemlite</td></tr><tr><td>annoTypeCount</td><td>FPSum</td><td>pubchemlite</td></tr><tr><td>annoTypeCount</td><td>AnnoTypeCount</td><td>pubchemlite</td></tr><tr><td>annotHitCount</td><td>AnnotHitCount</td><td>pubchemlite</td></tr></table><p>In addition, the <code><a href="compoundScorings.html">compoundScorings</a></code> function is also useful to programmatically
  generate a set of scorings to be used for ranking with <code class="command">MetFrag</code>. For instance, the following can be given
  to the <code>scoreTypes</code> argument to use all default scorings for PubChem: <code>compoundScorings("metfrag",
  "pubchem", onlyDefault=TRUE)$name</code>.</p>
<p>For all <code class="command">MetFrag</code> scoring types refer to the <code>Candidate Scores</code> section on the
  <a href="http://ipb-halle.github.io/MetFrag/projects/metfragr/" class="external-link">MetFragR homepage</a>.</p>
    </div>
    <div id="usage-of-metfrag-databases">
    <h2>Usage of MetFrag databases</h2>
    <p>When <code>database="chemspider"</code> setting the <code>chemSpiderToken</code> argument is
  mandatory.</p>
<p>When a local database is set (<em>i.e.</em> <code>sdf</code>, <code>psv</code>, <code>csv</code>, <code>comptox</code>, <code>pubchemlite</code>)
  the file location of the database should be set in the <code>LocalDatabasePath</code> value via the <code>extraOpts</code>
  argument or using the <code>patRoon.path.MetFragCompTox</code>/<code>patRoon.path.MetFragPubChemLite</code> option (only when
  <code>database="comptox"</code> or <code>database="pubchemlite"</code>).</p>
<p>Examples: <code>options(patRoon.path.MetFragCompTox = "C:/CompTox_17March2019_SelectMetaData.csv")</code></p>
<p><code>extraOpts = list(LocalDatabasePath = "C:/myDB.csv")</code>.</p>
<p>For <code>database="comptox"</code> the files can be obtained from
  <a href="ftp://newftp.epa.gov/COMPTOX/Sustainable_Chemistry_Data/Chemistry_Dashboard/MetFrag_metadata_files">here</a>.
  Furthermore, the files with additions for <a href="https://zenodo.org/record/3364464#.XnjM-XLvKUk" class="external-link">smoking</a> and
  <a href="https://zenodo.org/record/3472781#.XnjMAHLvKUk" class="external-link">wastewater</a> metadata are also supported. For
  <code>database="pubchemlite"</code> the <code class="file">.csv</code> database can be downloaded from
  <a href="https://zenodo.org/record/6503754" class="external-link">here</a> or from <a href="https://zenodo.org/record/6385954" class="external-link">here</a> for the OECD
  PFAS database. Note that only recent <code class="command">MetFrag</code> versions (&gt;= <samp>2.4.5</samp>) support these libraries.</p>
    </div>
    <div id="parallelization">
    <h2>Parallelization</h2>
    <p>generateCompoundsMetFrag uses multiprocessing to parallelize
  computations. Please see the parallelization section in the handbook for
  more details and <a href="patRoon-package.html">patRoon options</a> for configuration
  options.</p>
<p>When local database files are used with <code>generateCompoundsMetFrag</code> (<em>e.g.</em> when
  <code>database</code> is set to <code>"pubchemlite"</code>, <code>"csv"</code> etc.) and <span class="option">patRoon.MP.method="future"</span>, then
  the database file must be present on all the nodes. When <code>pubchemlite</code> or <code>comptox</code> is used, the location
  for these databases can be configured on the host with the respective package options
  (<span class="option">patRoon.path.MetFragPubChemLite</span> and <span class="option">patRoon.path.MetFragCompTox</span>). Note that these files must
  <em>also</em> be present on the local host computer, even if it is not participating in computations.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Ruttkies C, Schymanski EL, Wolf S, Hollender J, Neumann S (2016).
“MetFrag relaunched: incorporating strategies beyond in silico fragmentation.”
<em>Journal of Cheminformatics</em>, <b>8</b>(1).
<a href="https://doi.org/10.1186/s13321-016-0115-9" class="external-link">doi:10.1186/s13321-016-0115-9</a>
.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="generateCompounds.html">generateCompounds</a></code> for more details and other algorithms.</p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

